[[plugins]]
== Using Nexus Plugins

Nexus Open Source and Nexus Professional are built using a plugin
architecture, where Professional simply includes additional
plugins. Besides the default installed plugins you can install optional
plugins shipped with Nexus as well as plugins you or somebody else
created.
 
[[install-additional-plugins]]
=== Installing Additional Plugins


All plugins supplied by Sonatype are installed as part of the default
configuration and can be found in
+$NEXUS_HOME/nexus/WEB-INF/plugin-repository+.  Most plugins are
enabled by default. Some plugins are expose a capability as documented
in <<confignx-sect-capabilities>> and can therefore be enabled,
disabled and otherwise configured in the the capability
administration. The branding plugin or the outreach plugin are
examples of plugins exposing capabilities.

Prior to Nexus 2.7 optional plugins supplied by Sonatype can be found
in the directory +$NEXUS_HOME/nexus/WEB-INF/optional-plugins+. To
install any of these simply copy the folder containing the desired
plugin into +$NEXUS_HOME/nexus/WEB-INF/plugin-repository+.  When
updating Nexus you had to redo the install of any optinal plugins
using the newest version shipping with the download of the new Nexus
version. Any configuration of the plugin will be preserved from one
version to the other.

Plugins supplied by third parties or authored by yourself are
installed by copying the folder with the plugin code into
+sonatype-work/nexus/plugin-repository+.

After a restart of Nexus the new plugins will be active and ready
to use. Upgrades are done by simply copying over the newer plugin and
removing the older one.

Capability based plugins can be disabled in the capability
administration. Otherwise plugins can be removed by deleting the
respective folder in the plugin-repository and restarting Nexus.

[[nexus-outreach-plugin]]
=== Nexus Outreach Plugin

The Nexus Outreach Plugin is installed and enabled by default in Nexus
Open Source and Nexus Professional. It allocates 'Welcome' tab for
linking to further documentation and support resources. This data is
retrieved from Sonatype servers.

In a case where this outgoing traffic from your Nexus instance or the
resulting documentation and links are not desired, the plugin can be
disabled. The plugin can be disabled in the settings for the 'Outreach
: Management' capability as documented in
<<confignx-sect-capabilities>>.

You can safely remove the plugin as well without any other negative
side effects. To do so simply remove the 'nexus-outreach-plugin-X.Y.Z'
folder in '$NEXUS_HOME/nexus/WEB-INF/plugin-repository/' and restart
your Nexus instance.

[[custom-metadata-plugin]]
=== Custom Metadata

Support for custom metadata is part of the Nexus Professional
download. You can view, edit and search for additional metadata
associated to any artifact in your Nexus repositories.

Prior to Nexus 2.7 is was an optional plugin that needed to be
installed following the instructions in
<<install-additional-plugins>>.  The directory containing the plugin
code is called nexus-custom-metadata-plugin-X.Y.Z. Install the plugin

Security privileges allow you to define read only as well as write acces
for custom metadata as well as grant or disallow access.

==== Viewing Artifact Metadata

When viewing a specific artifact from browsing repository storage or a
repository index or from a search, the 'Artifact Metadata' tab
displays the interface shown in <<fig-using-viewing-metadata>>.

[[fig-using-viewing-metadata]]
.Viewing Artifact Metadata
image::figs/web/meta_existing-meta-value.png[scale=60]

Artifact metadata consists of a key, a value, and a namespace.
Existing metadata from an artifact's POM is given a +urn:maven+
namespace, and custom attributes are stored under the +urn:nexus/user+
namespace.

==== Editing Artifact Metadata

To add a custom attribute, click on an artifact in Nexus, and select
the 'Artifact Metadata' tab. Click on
the 'Add...' button there and a new row will be inserted into the list of
attributes. Supply a 'Key' and 'Value' and click the 'Save' button to update
the artifact's metadata. <<fig-using-editing-metadata>> shows the
Artifact Metadata panel with two custom attributes: "approvedBy" and
"approved".

[[fig-using-editing-metadata]]
.Editing Artifact Metadata
image::figs/web/meta_setting-meta-value.png[scale=60]

==== Searching Artifact Metadata

To search for artifacts with specific metadata, click on the 'Advanced
Search' link directly below the search field in the 'Artifact Search'
sub-menu of the Nexus menu. This opens the 'Search' panel and allows
you to select 'Metadata Search' in the search type drop-down as shown
in <<fig-using-search-metadata>>.

[[fig-using-search-metadata]]
.Searching Artifact Metadata
image::figs/web/meta_search-selection.png[scale=60]

Once you select the metadata search you will see two search fields and
an operator drop-down. The two search fields are the key and value of
the metadata you are searching for. The operator drop-down can be set
to 'Equals', 'Matches', 'Key Defined', or 'Not Equal'. 'Equals' and 'Not Equals'
compare the value for a specific key. 'Matches' allows the usage of +\*+
to allow any characters. E.g. looking for +tr\*+ would match +true+ but
also match +tree+. The 'Key Defined' operator will ignore any value provided
and return all artifacts with the supplied key.

.Metadata Search Results for Custom Metadata
image::figs/web/meta_search-function.png[scale=60]

Once you locate a matching artifact in the results list,
click on the artifact and then select the Artifact Metadata to examine
an artifacts metadata as shown in <<fig-using-search-metadata-results>>.

[[fig-using-search-metadata-results]]
.Metadata Search Results for Custom Metadata
image::figs/web/meta_search-result-0.png[scale=60]


[[nexus-branding-plugin]]
=== Nexus Branding Plugin

The branding plugin is part of Nexus Professional and allows you to
customize your Nexus instance by replacing the default Sonatype Nexus
logo in the top left hand corner of the header with an image of your
choice.

You can configure it by adding the 'Branding' capabililty as
documented in <<confignx-sect-capabilities>>and enabling it. By
default, the branding plugin will look for the new logo in a file
called +branding.png+ in your Nexus data directory's +conf+ folder. By
default the location is therefore
+sonatype-work/nexus/conf/branding.png+. The new logo needs to be a
PNG image. To blend in well in the UI, it is recommended that it is of
60 pixels height and has a transparent background.

If it fails to find a new logo, the plugin will fall back to using
the default Sonatype Nexus logo.

Prior to Nexus 2.7 the branding plugin was an optional plugin of Nexus
Professional and needed to be installed following the documentation in 
<<install-additional-plugins>>. In this case you needed to add a
branding.image.path property to the 'nexus.properties' file in 
'$NEXUS_HOME/conf/':

----
branding.image.path=/data/images/nexus_logo.png
----

////
/* Local Variables: */
/* ispell-personal-dictionary: "ispell.dict" */
/* End:             */
////
